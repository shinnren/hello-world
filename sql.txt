SELECT
 el_0.LOCATION_ID
,el_0.RECEIVE_ID
,el_0.RECEIVE_ROW_ID
,el_0.IMPORT_FLG
,el_0.ERROR_FLG
,el_0.ERROR_MESSAGE_CD
,el_0.CENTER_CD
,el_0.LOCATION_CD
,el_0.LOCATION_NM
,el_0.WAREHOUSE_CD
,el_0.ZONE_CD
,el_0.LOCATION_TYPE
,el_0.PICKING_LOCATION_FLG
,el_0.ALLOC_NG_FLG
,el_0.PICKING_ORDER
,el_0.ALLOC_ORDER
,el_0.CLIENT_CD
,el_0.REPLENISH_PRODUCT_CD
,el_0.REPLENISH_STOCK_TYPE_CD
,el_0.REPLENISH_DEPOSIT_CD
,el_0.REPLENISH_P_NUM
,el_0.REPLENISH_P_PRODUCT_SHAPE_CD
,el_0.MAX_STORE_NUM
,el_0.MAX_STORE_PRODUCT_SHAPE_CD
,el_0.DEL_FLG
,el_0.VERSION_NO
,el_0.CONTROL_NO
,el_0.ADD_DT
,el_0.ADD_USER
,el_0.ADD_PROCESS
,el_0.UPD_DT
,el_0.UPD_USER
,el_0.UPD_PROCESS
,ts_ml_0.STOCK_ID
,mz_0.ZONE_ID
,mz_mw_0.WAREHOUSE_ID
,mp_0.PRODUCT_ID
,mp_mps_0.PRODUCT_SHAPE_ID AS REPLENISH_PRODUCT_SHAPE_ID
,mp_mps_2.PRODUCT_SHAPE_ID AS MAX_STORE_PRODUCT_SHAPE_ID
,mp_mps_1.PRODUCT_SHAPE_ID AS REPLENISH_EXIST_PRODUCT_SHAPE_ID
,mp_mps_3.PRODUCT_SHAPE_ID AS MAX_EXIST_STORE_PRODUCT_SHAPE_ID
,mcc_mccd_0.CENTER_CLASS_DTL_ID AS LOCATION_TYPE_CENTER_CLASS_DTL_ID
,mcc_mccd_1.CENTER_CLASS_DTL_ID AS PICKING_LOCATION_CENTER_CLASS_DTL_ID
,mcc_mccd_2.CENTER_CLASS_DTL_ID AS ALLOC_NG_CENTER_CLASS_DTL_ID
,mcc_mccd_3.CENTER_CLASS_DTL_ID AS DEL_CENTER_CLASS_DTL_ID
,mst_0.STOCK_TYPE_ID
,bm_0.MESSAGE_NM
,ml_0.LOCATION_ID AS MLOCATION_ID
,ml_0.VERSION_NO AS MVERSION_NO


FROM
    E_LOCATION el_0
/* 削除フラグが「1」の場合、共通在庫存在チェック */
LEFT JOIN (
    SELECT ml_1.LOCATION_CD, ts_0.STOCK_ID,mst_1.STOCK_TYPE_CD
    FROM T_STOCK ts_0
    INNER JOIN M_LOCATION ml_1
    ON ml_1.CENTER_ID=4 AND ml_1.LOCATION_ID=ts_0.LOCATION_ID AND ts_0.CLIENT_ID=4
    LEFT JOIN M_STOCK_TYPE mst_1 ON mst_1.STOCK_TYPE_ID = ts_0.STOCK_TYPE_ID
) AS ts_ml_0 ON  ts_ml_0.LOCATION_CD=el_0.LOCATION_CD AND ts_ml_0.STOCK_TYPE_CD=el_0.REPLENISH_STOCK_TYPE_CD AND el_0.DEL_FLG='1'

/* 倉庫CD */
LEFT JOIN (
    SELECT mw_1.WAREHOUSE_ID, mw_1.WAREHOUSE_CD, mz_1.ZONE_CD
    FROM M_WAREHOUSE mw_1
    INNER JOIN M_ZONE mz_1
    ON mw_1.WAREHOUSE_ID = mz_1.WAREHOUSE_ID AND mw_1.CENTER_ID=4
) AS mz_mw_0 ON el_0.ZONE_CD = mz_mw_0.ZONE_CD AND el_0.WAREHOUSE_CD = mz_mw_0.WAREHOUSE_CD

/* ゾーンCD */
LEFT JOIN M_ZONE mz_0 ON el_0.ZONE_CD = mz_0.ZONE_CD

/* 補充商品CD */
LEFT JOIN M_PRODUCT mp_0 ON el_0.REPLENISH_PRODUCT_CD = mp_0.PRODUCT_CD AND mp_0.CLIENT_ID=4

/* 補充点商品荷姿CD */
LEFT JOIN (
    SELECT mps_1.PRODUCT_SHAPE_ID, ms_1.SHAPE_CD
    FROM M_PRODUCT_SHAPE mps_1
    INNER JOIN M_SHAPE ms_1
    ON ms_1.SHAPE_ID = mps_1.SHAPE_ID AND ms_1.CLIENT_ID=4
) AS mp_mps_0 ON el_0.REPLENISH_P_PRODUCT_SHAPE_CD = mp_mps_0.SHAPE_CD

/* 補充点商品荷姿は商品荷姿マスタに存在チェック */
LEFT JOIN (
    SELECT mps_10.PRODUCT_SHAPE_ID, ms_10.SHAPE_CD, mp_10.PRODUCT_ID, mp_10.PRODUCT_CD
    FROM M_PRODUCT_SHAPE mps_10
    INNER JOIN M_SHAPE ms_10
    INNER JOIN M_PRODUCT mp_10
    ON ms_10.SHAPE_ID = mps_10.SHAPE_ID AND mp_10.PRODUCT_ID = mps_10.PRODUCT_ID AND ms_10.CLIENT_ID=4
) AS mp_mps_1 ON el_0.REPLENISH_P_PRODUCT_SHAPE_CD = mp_mps_1.SHAPE_CD AND el_0.REPLENISH_PRODUCT_CD = mp_mps_1.PRODUCT_CD

/* 最大格納数商品荷姿CD */
LEFT JOIN (
    SELECT mps_2.PRODUCT_SHAPE_ID, mp_2.SHAPE_CD
    FROM M_PRODUCT_SHAPE mps_2
    INNER JOIN M_SHAPE mp_2
    ON mp_2.SHAPE_ID = mps_2.SHAPE_ID AND mp_2.CLIENT_ID=4
) AS mp_mps_2 ON el_0.MAX_STORE_PRODUCT_SHAPE_CD = mp_mps_2.SHAPE_CD

/* 最大格納数商品荷姿は商品荷姿マスタに存在チェック */
LEFT JOIN (
    SELECT mps_3.PRODUCT_SHAPE_ID, ms_3.SHAPE_CD, mp_3.PRODUCT_ID, mp_3.PRODUCT_CD
    FROM M_PRODUCT_SHAPE mps_3
    INNER JOIN M_SHAPE ms_3
    INNER JOIN M_PRODUCT mp_3
    ON ms_3.SHAPE_ID = mps_3.SHAPE_ID AND mp_3.PRODUCT_ID = mps_3.PRODUCT_ID AND ms_3.CLIENT_ID=4
) AS mp_mps_3 ON el_0.REPLENISH_P_PRODUCT_SHAPE_CD = mp_mps_3.SHAPE_CD AND el_0.REPLENISH_PRODUCT_CD = mp_mps_3.PRODUCT_CD

/* ロケーション種別CD */
LEFT JOIN (
    SELECT mccd_0.CENTER_CLASS_DTL_ID, mccd_0.CLASS_DTL_CD
    FROM M_CENTER_CLASS_DTL mccd_0
    INNER JOIN M_CENTER_CLASS mcc_0
     ON mcc_0.CENTER_CLASS_ID = mccd_0.CENTER_CLASS_ID
    AND mcc_0.CENTER_ID=4
    AND mcc_0.CLASS_CD='LOCATION_TYPE'
) AS mcc_mccd_0 ON el_0.LOCATION_TYPE = mcc_mccd_0.CLASS_DTL_CD


/* ピックロケフラグ */
LEFT JOIN (
    SELECT mccd_1.CENTER_CLASS_DTL_ID, mccd_1.CLASS_DTL_CD
    FROM M_CENTER_CLASS_DTL mccd_1
    INNER JOIN M_CENTER_CLASS mcc_1
     ON mcc_1.CENTER_CLASS_ID = mccd_1.CENTER_CLASS_ID
    AND mcc_1.CENTER_ID=4
    AND mcc_1.CLASS_CD='PICKING_LOCATION_FLG'
) AS mcc_mccd_1 ON el_0.PICKING_LOCATION_FLG = mcc_mccd_1.CLASS_DTL_CD


/* 引当禁止フラグ */
LEFT JOIN (
    SELECT mccd_2.CENTER_CLASS_DTL_ID, mccd_2.CLASS_DTL_CD
    FROM M_CENTER_CLASS_DTL mccd_2
    INNER JOIN M_CENTER_CLASS mcc_2
     ON mcc_2.CENTER_CLASS_ID = mccd_2.CENTER_CLASS_ID
    AND mcc_2.CENTER_ID=4
    AND mcc_2.CLASS_CD='ALLC_NG_FLG'
) AS mcc_mccd_2 ON el_0.ALLOC_NG_FLG = mcc_mccd_2.CLASS_DTL_CD

/* 削除フラグ */
LEFT JOIN (
    SELECT mccd_3.CENTER_CLASS_DTL_ID, mccd_3.CLASS_DTL_CD
    FROM M_CENTER_CLASS_DTL mccd_3
    INNER JOIN M_CENTER_CLASS mcc_3
     ON mcc_3.CENTER_CLASS_ID = mccd_3.CENTER_CLASS_ID
    AND mcc_3.CENTER_ID=4
    AND mcc_3.CLASS_CD='DEL_FLG'
) AS mcc_mccd_3 ON el_0.DEL_FLG = mcc_mccd_3.CLASS_DTL_CD

/* 補充在庫区分CD */
LEFT JOIN M_STOCK_TYPE mst_0 ON el_0.REPLENISH_STOCK_TYPE_CD = mst_0.STOCK_TYPE_CD

/* 補充預託CD */
LEFT JOIN M_CUSTOMER mc_0 ON el_0.REPLENISH_DEPOSIT_CD = mc_0.CUSTOMER_CD AND mc_0.CLIENT_ID=4

LEFT JOIN b_message bm_0 ON el_0.ERROR_MESSAGE_CD = bm_0.MESSAGE_CD

AND bm_0.CULTURE_ID=1


LEFT JOIN M_LOCATION ml_0 ON  el_0.LOCATION_CD = ml_0.LOCATION_CD AND ml_0.CENTER_ID = 4

WHERE
	1 = 1
 AND el_0.RECEIVE_ID = 30


 AND el_0.IMPORT_FLG='0'

ORDER BY el_0.LOCATION_ID ASC,el_0.RECEIVE_ID ASC,el_0.RECEIVE_ROW_ID ASC